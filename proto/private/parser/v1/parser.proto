syntax = "proto3";

package private.parser.v1;

import "immutable/common/v1/common.proto";
import "immutable/models/v1/models.proto";
import "private/parser/v1/solana_parser.proto";

option go_package = "github.com/tkhq/mono/src/go/gen/pkg/private/parser/v1";

enum BlockchainRuntime {
  BLOCKCHAIN_RUNTIME_UNSPECIFIED = 0;
  BLOCKCHAIN_RUNTIME_EVM = 1;
}

message Metadata {
  string key = 1;
  string value = 2;
}

message ParsedTransactionPayload {
  repeated Metadata transaction_metadata = 1;
  repeated Metadata method_metadata = 2;
  string unsigned_payload = 3;
  repeated ContractArgument contract_call_args = 4;
  optional string smart_contract_interface_digest = 5; // the digest over smart contract details. this digest will also be stored in org data.
}

message ParsedTransaction {
  ParsedTransactionPayload payload = 1;
  immutable.models.v1.Signature signature = 2;
}

message SmartContractInterfacePayload {
  string smart_contract_interface_id = 1;
  string organization_id = 2;
  string smart_contract_address = 3; // for smart contract addresses and program IDs
  string smart_contract_interface = 4; // json string
  immutable.common.v1.SmartContractInterfaceType type = 5;
  string label = 6;
  string notes = 7;
}

message SmartContractInterface {
  SmartContractInterfacePayload payload = 1;
  immutable.models.v1.Signature signature = 2;
}
